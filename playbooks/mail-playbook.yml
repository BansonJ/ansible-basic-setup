---
- name: Mail server
  hosts: mailservers
  become: true
  tasks:
  ##############################
  # zone name과 inventory를 바꿔 각 서버마다 실행할 것.
  # dns 설정은 따로 추가할 것.
  ##############################
    - name: Mail server 구성
      ansible.builtin.include_role:
        name: "{{ item }}"
      vars:
        pkg:
          - postfix
          - firewalld
          - s-nail
          - dovecot
        svc:
          - postfix
          - dovecot
          - firewalld
        fw_svc:
          - smtp
          - smtps
          - smtp-submission
          - pop3
          - pop3s
          - imap
          - imaps
      loop:
        - common
        - mail
